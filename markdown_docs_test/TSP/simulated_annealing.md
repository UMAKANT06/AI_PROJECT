## ClassDef SimulatedAnnealing

Documentation for SimulatedAnnealing Class:

The SimulatedAnnealing class is a Python class used to perform simulated annealing on a set of coordinates (coords) to find the shortest tour. The class takes the following parameters:

1. coords (required): A list of coordinates for the points to be visited.
2. temp (optional, default=1000): The initial temperature parameter for the simulated annealing algorithm.
3. alpha (optional, default=0.95): The cooling rate parameter for the simulated annealing algorithm.
4. stopping_temp (optional, default=1): The minimum temperature at which to stop the simulated annealing algorithm.
5. stopping_iter (optional, default=1000): The maximum number of iterations to perform in the simulated annealing algorithm.

The SimulatedAnnealing class has the following functions:

1. __init__(): Initializes the SimulatedAnnealing object with the given coordinates and parameters.
2. weight(): Calculates the weight of a solution by summing the distances between all points in the solution.
3. acceptance_probability(): Calculates the probability of accepting a candidate solution based on the temperature parameter.
4. accept(): Accepts a candidate solution if it is better than the current solution or if the probability of accepting the candidate solution is greater than a random value generated by the random library.
5. anneal(): Performs the simulated annealing algorithm for the given number of iterations, adjusting the temperature parameter and evaluating solutions based on their weights.
6. animateSolutions(): Animate the solution history using the animated_visualizer module.
7. plotLearning(): Plots the weight list and the initial and optimized weights as a line graph.

Edge Cases:

* If the input coordinates are not in a valid format, an error is raised.
* If the temperature parameter is less than 0, an error is raised.
* If the cooling rate parameter is less than 0 or greater than 1, an error is raised.
* If the stopping temperature parameter is less than 0 or greater than the initial temperature parameter, an error is raised.
* If the stopping iteration parameter is less than 1, an error is raised.

Error Handling:

* If there are any errors in the input coordinates or parameters, an error message is displayed.
* If the simulated annealing algorithm fails to converge within the maximum number of iterations, an error message is displayed.

Return Values:

* The minimum weight solution found by the simulated annealing algorithm.
* A list of all solutions evaluated during the simulation, including the initial and optimized solutions.
* A plot of the weight list and the initial and optimized weights as a line graph.

Notes:

* The SimulatedAnnealing class is designed to be used with a set of coordinates (coords) that form a tour.
* The temperature parameter controls the probability of accepting a worse solution, which helps the algorithm explore different solutions during the simulation.
* The cooling rate parameter controls the rate at which the temperature decreases during the simulation.
* The stopping temperature parameter controls the minimum temperature at which to stop the simulation.
* The stopping iteration parameter controls the maximum number of iterations to perform in the simulation.
* The animateSolutions function is used to visualize the solution history using the animated_visualizer module.
* The plotLearning function is used to create a line graph of the weight list and the initial and optimized weights.
### FunctionDef __init__(self, coords, temp, alpha, stopping_temp, stopping_iter)

The TSP (Traveling Salesman Problem) simulated annealing algorithm uses the following parameters and attributes:

Parameters and Attributes:

* `coords`: a list of coordinates representing the cities to be visited by the salesman
* `temp`: initial temperature for the annealing process
* `alpha`: cooling rate for the annealing process
* `stopping_temp`: stopping temperature for the annealing process
* `stopping_iter`: maximum number of iterations before the algorithm stops

Attributes:

* `dist_matrix`: a matrix containing distances between all pairs of cities
* `curr_solution`: the current solution, represented as a list of city indices
* `best_solution`: the best solution found so far, which is initially set to the nearest-neighbour solution
* `solution_history`: a list containing all solutions generated during the annealing process
* `curr_weight`: the weight of the current solution, calculated using the Euclidean distance between cities
* `initial_weight`: the initial weight of the TSP instance
* `min_weight`: the minimum weight found so far, initially set to the initial weight
* `weight_list`: a list containing all weights generated during the annealing process

Notes:

* The function is used to initialize the simulated annealing algorithm for the TSP.
* It sets the initial parameters and attributes required for the annealing process, including the distance matrix, current solution, best solution, and solution history.
* The weight of the current solution is calculated using the Euclidean distance between cities.
* The stopping temperature and maximum number of iterations are used to control the convergence of the algorithm.
* The initial weight, minimum weight, and weight list are used for monitoring the progress of the annealing process.
***
### FunctionDef weight(self, sol)

weight(self, sol)

The `weight` function is a method that calculates the total cost of a given solution (sol) by summing up the distances between each pair of cities in the solution. It takes an instance of the `SimulatedAnnealing` class as an input and returns a float value representing the total weight of the solution.

Parameters:

* `self`: An instance of the `SimulatedAnnealing` class.
* `sol`: A list of integers representing the cities in the solution. Each integer is an index to the city array in the `SimulatedAnnealing` class.

Returns:

* The total weight of the solution, represented as a float value.

Notes:

* The function iterates over each pair of adjacent cities in the solution and calculates the distance between them using the `dist_matrix` attribute. It then adds these distances to the total weight of the solution.
* If an edge case occurs where a city is not included in the solution, it will be handled by returning a `ValueError`.
* The function returns the total weight of the solution, which can be used for evaluation purposes during testing.

Testing Notes:

* The `weight` function should be tested with different solutions to ensure that it calculates the correct weight value.
* Edge cases such as empty or null solutions should be handled correctly and return a `ValueError`.
* Tests can be written to check if the function returns the correct weight value for various inputs, such as a solution with all cities visited in order or a solution with some cities missing.
* Tests can also be written to check if the function handles invalid input correctly by returning the correct error message and type.
***
### FunctionDef acceptance_probability(self, candidate_weight)

### Acceptance Probability Function Documentation

The `acceptance_probability` function is a crucial part of the Simulated Annealing algorithm used to determine whether a new solution should be accepted or rejected. The function takes in a candidate weight and returns an acceptance probability based on the difference between the candidate weight and the current weight, as well as a temperature parameter that controls the cooling rate.

The `acceptance_probability` function is defined as follows:
```python
def acceptance_probability(self, candidate_weight):
    return math.exp(-abs(candidate_weight - self.curr_weight) / self.temp)
```
The function uses the exponential formula to calculate the acceptance probability based on the difference between the candidate weight and the current weight, as well as the temperature parameter. The `self` parameter refers to the instance of the SimulatedAnnealing class that calls this function.

To test this function effectively, it is important to consider edge cases and error handling scenarios. Here are some examples:

* **Edge case 1**: If the candidate weight is equal to the current weight, the acceptance probability should be 1.0. This ensures that no matter what the temperature parameter is set to, the new solution will always be accepted if it has the same weight as the current best solution.
* **Error handling scenario 1**: If the candidate weight is not a number or is not within the expected range (e.g., negative), the function should raise an error. This ensures that the function works correctly only when the input values are valid and appropriate for the calculation.
* **Edge case 2**: If the temperature parameter is set to zero, the acceptance probability should be 1.0. This ensures that even if the cooling rate is very slow, the new solution will always be accepted if it has the same weight as the current best solution.

To ensure that the `acceptance_probability` function works correctly in different scenarios, it is important to test the function with a variety of inputs and parameters. The following table lists some example input values and their corresponding outputs:
```
| Candidate Weight | Current Weight | Temperature | Acceptance Probability |
| --------------- | -------------- | ----------- | --------------------- |
| 10              | 5              | 1           | 0.3679                |
| 12              | 5              | 2           | 0.4466                |
| 15              | 5              | 3           | 0.5                   |
| 20              | 5              | 4           | 0.6321                |
```
As can be seen from the table, the acceptance probability increases as the difference between the candidate weight and the current weight decreases, but reaches a maximum value of 1 when the difference is zero. The temperature parameter controls the cooling rate, which affects the acceptance probability in a non-linear way.

In conclusion, the `acceptance_probability` function is a critical component of the Simulated Annealing algorithm that determines whether a new solution should be accepted or rejected based on its weight and the current temperature parameter. It is important to test this function with various input values and parameters to ensure that it works correctly in different scenarios, and to identify any edge cases or error handling scenarios that may arise during testing.
***
### FunctionDef accept(self, candidate)
Documentation for accept() in simulated_annealing.py
-----------------------------------------------

### Introduction
The `accept` function is a critical part of the Simulated Annealing algorithm used to determine whether a candidate solution should be accepted or not. This function takes two parameters: a `candidate` and its weight. The function evaluates the candidate's weight and decides whether it should be accepted as the new current solution based on various factors such as the weight of the candidate, the acceptance probability, and the minimum weight reached so far.

### Parameters
The function takes two parameters:
* `candidate`: a list representing a potential solution for the TSP problem.
* `candidate_weight`: the weight of the candidate solution.

### Return values
The function returns a boolean value indicating whether the candidate should be accepted as the new current solution based on its weight and other factors. The return value is `True` if the candidate is accepted, and `False` otherwise.

### Error handling
The function raises an error if the input parameters are not valid or if there is a problem with the acceptance probability calculation.

### Edge cases
* If the weight of the candidate solution is less than the current minimum weight, the function accepts the new candidate as the best solution and updates the minimum weight accordingly.
* If the weight of the candidate solution is greater than or equal to the current minimum weight, the function calculates the acceptance probability based on the current temperature and the weight difference between the candidate and the current solution. If the acceptance probability is greater than a random value generated by `random.random()`, the function accepts the new candidate as the current solution.
* If the input parameters are invalid or if there is a problem with the acceptance probability calculation, the function raises an error.

### Notes
The acceptance probability is calculated based on the Boltzmann distribution, which is a probability distribution that depends on the temperature and the weight difference between two solutions. The higher the temperature, the greater the acceptance probability of accepting a new solution that is worse than the current one. The function uses the `acceptance_probability` method to calculate the acceptance probability for each candidate solution based on its weight and the current temperature.

### Conclusion
In conclusion, the `accept` function is an essential part of the Simulated Annealing algorithm that determines whether a potential solution should be accepted as the new current solution based on various factors such as its weight, the acceptance probability, and the minimum weight reached so far. The function ensures that the current solution is updated accordingly to reflect the best possible solution found by the algorithm during its execution.
***
### FunctionDef anneal(self)

Documentation for `anneal` Function in Simulated Annealing Class:
============================================================

The `anneal` function is a core method of the Simulated Annealing class that is used to perform simulated annealing on the input problem. The function takes no arguments and returns nothing, but it modifies several attributes of the object. Here is a detailed documentation for the `anneal` function:

### Function Description
The `anneal` function performs simulated annealing on the current solution using a cooling schedule. It iteratively applies a series of operations to the current solution, and each operation has a probability of being accepted based on the temperature. The function stops when the temperature reaches a minimum threshold or the maximum number of iterations is reached.

### Function Parameters
There are no parameters for the `anneal` function. However, the following attributes of the Simulated Annealing object are used:

* `temp`: The current temperature of the annealing process. This attribute should be a positive float value.
* `stopping_temp`: The minimum temperature at which to stop the annealing process. This attribute should also be a positive float value.
* `alpha`: The cooling schedule parameter that determines how fast the temperature decreases during the annealing process. This attribute should be a positive float value between 0 and 1.
* `stopping_iter`: The maximum number of iterations to perform during the annealing process. This attribute should be a positive integer value.
* `initial_weight`: The weight of the initial solution. This attribute is used for bookkeeping purposes only.
* `min_weight`: The minimum weight found during the annealing process. This attribute is used for bookkeeping purposes only.
* `curr_solution`: The current solution being annealed. This attribute should be a list of integers representing the solution.
* `curr_weight`: The weight of the current solution. This attribute is used for bookkeeping purposes only.
* `weight_list`: A list containing the weights of all solutions found during the annealing process. This attribute is used for bookkeeping purposes only.
* `solution_history`: A list containing all solutions found during the annealing process, including the initial solution. This attribute is used for bookkeeping purposes only.

### Function Return Value
The function returns nothing but modifies several attributes of the Simulated Annealing object, including:

* `temp`: The new temperature after the iteration.
* `iteration`: The number of iterations performed during the annealing process.
* `weight_list`: A list containing the weights of all solutions found during the annealing process.
* `solution_history`: A list containing all solutions found during the annealing process, including the initial solution.

### Edge Cases and Error Handling
The `anneal` function should handle edge cases such as:

* The temperature reaching zero before the stopping threshold is reached. In this case, the function should terminate immediately without making any further changes to the attributes of the Simulated Annealing object.
* The maximum number of iterations being reached before the stopping threshold is reached. In this case, the function should terminate immediately without making any further changes to the attributes of the Simulated Annealing object.

The `anneal` function should also handle errors such as:

* An invalid value for the temperature or stopping threshold. In this case, the function should raise a ValueError exception.
* A non-integer value for the maximum number of iterations. In this case, the function should raise a TypeError exception.

### Return Values
The `anneal` function returns nothing but modifies several attributes of the Simulated Annealing object, including:

* `temp`: The new temperature after the iteration.
* `iteration`: The number of iterations performed during the annealing process.
* `weight_list`: A list containing the weights of all solutions found during the annealing process.
* `solution_history`: A list containing all solutions found during the annealing process, including the initial solution.

### Notes
The `anneal` function is a core method of the Simulated Annealing class that performs simulated annealing on the input problem using a cooling schedule. The function takes no arguments and returns nothing but modifies several attributes of the object, including the temperature, iteration count, weight list, and solution history. The function should handle edge cases and errors appropriately and return appropriate values.
***
### FunctionDef animateSolutions(self)
animateSolutions is a function that visualizes the traveling salesman problem (TSP) solution history using simulated annealing algorithm. This function takes no parameters and returns nothing.
It is part of the animateSolutions class, which is responsible for animating the TSP solution history.
The function first calls the animateTSP method from the animated visualizer object, passing in two parameters: solution_history and coords.
solution_history is an array of integers that represents the traveling salesman problem solution history. Coords is an array of floats that represent the coordinates of each city in the TSP instance.
The animateTSP method uses these parameters to generate an animation of the TSP solution history, showing how the solution changes over time.
Note: If you are a tester, it is essential to thoroughly test this function to ensure that it works correctly and produces the expected results.
***
### FunctionDef plotLearning(self)

plotLearning: A Function for Visualizing the Learning Process of Simulated Annealing
===============================================================================

The `plotLearning` function is a part of the `SimulatedAnnealing` class in TSP. This function is used to visualize the learning process of simulated annealing by plotting the weight of each iteration against the iteration number. The function takes no parameters and returns nothing, but it displays a graph with several key elements.

Key Features of `plotLearning`
------------------------------

1. **Initial Weight:** The initial weight is represented by a red line that is dashed. This line shows the starting point for simulated annealing and serves as a reference for comparison.
2. **Optimized Weight:** The optimized weight is represented by a green line that is also dashed. This line shows the lowest weight achieved during the simulation, which represents the optimized solution found by simulated annealing.
3. **Iteration Number:** The iteration number is plotted on the x-axis of the graph. Each point in the graph corresponds to one iteration of simulated annealing, and the weight at each point represents the weight achieved during that iteration.
4. **Weight:** The weight is plotted on the y-axis of the graph. This represents the objective function being optimized by simulated annealing, and higher weights indicate a worse solution than lower weights.
5. **Legend:** The legend shows the labels for the two lines representing the initial weight and the optimized weight.

Edge Cases and Error Handling
-----------------------------

1. **Empty List of Weights:** If the `weight_list` attribute is empty, an error will be thrown by the `range()` function when trying to plot the graph. In this case, the user should check that the `SimulatedAnnealing` instance has a non-empty `weight_list` before calling the `plotLearning` function.
2. **Non-Numeric Weights:** If any of the weights in the `weight_list` attribute are not numeric, an error will be thrown by the `plt.plot()` function when trying to plot the graph. In this case, the user should check that all the weights in the list are numeric before calling the `plotLearning` function.
3. **Invalid Initial Weight:** If the initial weight is negative or non-numeric, an error will be thrown by the `plt.axhline()` function when trying to plot the graph. In this case, the user should check that the initial weight is a positive number before calling the `plotLearning` function.
4. **Invalid Min Weight:** If the minimum weight is negative or non-numeric, an error will be thrown by the `plt.axhline()` function when trying to plot the graph. In this case, the user should check that the minimum weight is a positive number before calling the `plotLearning` function.
5. **Insufficient Data:** If there are not enough points in the `weight_list` attribute to create a valid graph, an error will be thrown by the `plt.plot()` function when trying to plot the graph. In this case, the user should check that the `weight_list` attribute has enough data points before calling the `plotLearning` function.

Return Values
-------------

The `plotLearning` function does not return any values. However, it displays a graph with several key elements.

Conclusion
----------

In conclusion, the `plotLearning` function is an important part of the `SimulatedAnnealing` class in TSP that helps users visualize the learning process of simulated annealing. The function has several key features, including plotting the weight of each iteration against the iteration number, representing the initial weight and optimized weight with dashed lines, and displaying a legend showing the labels for the two lines representing the initial weight and the optimized weight. The function also handles edge cases and errors related to empty lists of weights, non-numeric weights, invalid initial or minimum weights, and insufficient data points. By using this function, users can gain a better understanding of how simulated annealing works and how it finds the optimal solution for the Traveling Salesman Problem.
***
